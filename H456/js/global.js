(function(w){if(w.rexseeStatusBar){rexseeStatusBar.setStyle('visibility:hidden;');}var J=document;w.Animation=w.requestAnimationFrame||w.mozRequestAnimationFrame||w.webkitRequestAnimationFrame||w.msRequestAnimationFrame||w.oRequestAnimationFrame||w.setImmediate||w.msSetIntermediate||function(aV){setTimeout(aV,1000/60)};function find(val){return navigator.userAgent.toLowerCase().indexOf(val)> -1};w.$={c:function(a,b){return $.M(J.createElement(a||'div'),b)},url:'./',get:function(a,b){return(b||J).querySelector(a)},V:function(a,b){return(b||J).querySelectorAll(a)},O:function(a,fn){for(var i=0,T=a.length;i<T;i++){fn.call(a[i],i);}},extend:function(a,b){for(i in b){a[i]=b[i]};return a;},w:window.innerWidth,aj:find("android"),az:find("iphone"),webkit:find('webkit'),qq:find('mqqbrowser'),M:function(R,css){var z,y=R.style,x;for(var i in css){z=css[i];x=isNaN(z)?z:z+'px';switch(i){case 'w':y.width=x;break;case 'h':y.height=x;break;default:y[i]=z;}}return R;},bU:function(){var z=new Date();return(z.getMinutes()*60+z.getSeconds())*1000+z.getMilliseconds()},C:function(e,def,p){e=e||window.event;if(!def){e.stopPropagation()}if(!p){e.preventDefault()}e=e.touches?e.touches[0]:e;return e;},K:function(e,type,fn){if($.az||$.aj){var aa={mousedown:'touchstart',mouseup:'touchend',mousemove:'touchmove'};type=aa[type]||type;}e.removeEventListener(type,fn,false);e.addEventListener(type,fn,false);},move:function(R,from,to,time,b,h){h=h||'h';var start=$.bU();var end,L;(function(){end=$.bU();L= !b?from-from*(end-start)/time:from+(to*(end-start)/time-from*(end-start)/time);if(end-start<time){direction(L);Animation(arguments.callee);}else{direction(to);if(b==2)R.remove();}})();function direction(n){$.M(R,{h:n});}},current:function(a,index,H){var t;$.O(a,function(i){t=this;if(i!=index){if(t.classList){t.classList.remove(H);}else{t.className=t.className.replace(H,'');}}else{if(t.classList){t.classList.add(H);}else{t.className=t.className.replace(H,'')+' '+H;}}})},resize:function(fn){w.onresize=fn;$.K(w,"orientationchange",fn);},js:function(a,fn){a=typeof a=='string'?[a]:a;var head=J.head;$.O(a,function(i){var s=$.c("script");s.src=$.url+this;s.onload=function(){fn(i);};head.insertBefore(s,head.firstChild);})}};$.all=$.get('#Wapper');$.css=function(e,z){for(i in z){$.O(['Webkit','O','Moz'],function(){e.style[this+i]=z[i];});e.style[i]=z[i];}};$.j=function(e,x,y,t){t= !isNaN(t)?t:.3;if($.webkit){$.css(e,{Transform:'translate3d('+x+'px,'+(y||0)+'px,0)'})}else{$.css(e,{Transform:'translate('+x+'px,'+(y||0)+'px)'})}$.css(e,{TransitionDuration:t+'s'})};$.O(['time','article','aside','section','header','footer'],function(){$.c(this);});(function(){var menu=$.get('header nav'),b=false,m=$.get('header .menu');$.M(menu,{display:'block'});var mh=menu.clientHeight;$.M(menu,{display:'none'});$.K(m,'mousedown',function(){$.M(menu,{display:'block'});b= !b;menu.remove=function(){!b&&$.M(menu,{display:'none'})};$.move(menu,b?0:mh,b?mh:0,300,2)});if(J.location.pathname.length>1){var top=$.c();top.className='top';var h=0,wh=w.innerHeight*1.2;w.onscroll=function(){h=w.scrollY;if(h>wh){if(!top.parentNode)$.all.appendChild(top)}else{if(top.parentNode)$.all.removeChild(top)}};top.onclick=function(){(function go(){h*=0.8;if(h<=100){h=1;}else{Animation(go);}w.scrollTo(1,h);})();}}})();(function(){var p=$.get('.detail .comment'),more=$.get('.mores'),ms=$.V('.list .pages .mores');ms=ms.length?ms:more;if(p){$.js('js/detail.js',function(){$.detail(p);})}if(ms){$.js('js/more.js',function(){$.more(ms);})}})();(function(){var list=$.V('.list');if(!list.length)return;$.O(list,function(k){var left= -$.w,G=this,parent=this.parentNode,height=false;$.extend(G,{p:$.V('.pages',this),s:$.V('.scroll .menu li',parent),r:$.get('.scroll .right',parent),l:$.get('.scroll .left',parent),i:0});G.T=G.p.length;if(!G.s.length){G.s=$.V('li',$.get('#Wapper .columns nav'));height=$.get('.columns').offsetTop;}$.M(this,{w:$.w*(G.T+2)});function go(l,i,t,b){$.j(G,l,0,t);$.current(G.s,i,'current');if(height&& !b)window.scrollTo(1,height);};go(-$.w,0,0,true);var T=G.s.length+1;function aF(G,t){left=(G.i+1)* -$.w;G.i=G.i<0?T-2:G.i>T-2?0:G.i;go(left,G.i);if(G.i==0){setTimeout(function(){left= -$.w;go(-$.w,0,0)},(t||.3)*1000)}else if(G.i==(T-2)){setTimeout(function(){left= -$.w*(T-1);go(-$.w*(T-1),G.i,0);},(t||.3)*1000)}};$.K(this,'mousedown',function(e){e=$.C(e,0,1);this.setCapture&&this.setCapture();this.down=1;this.bA=e.clientX;this.x=0;this.y=e.clientY;this.startTime=$.bU();});$.K(this,'mousemove',function(e){var ee=e.touches?e.touches[0]:e;if(this.down){this.x=ee.clientX-this.bA;var x=Math.abs(this.x),y=Math.abs(ee.clientY-this.y);if(x>y&&x>5){$.C(e);$.j(this,this.x+left,0,0)}else{this.down=false;}}});function ab(){if(!this.down|| !this.x)return;this.down&&(this.down=0);G.releaseCapture&&G.releaseCapture();if(this.x< -$.w/4){G.i+=1;}else if(this.x>Math.abs(-$.w/4)){G.i-=1;}aF(this)};$.K(this,'mouseup',ab);$.O(G.p,function(i){$.M(this,{w:$.w});if(i==0){G.appendChild(this.cloneNode(true))}if(i==G.T-1){G.insertBefore(this.cloneNode(true),G.p[0])}});$.O(G.s,function(i){$.K(this,'mousedown',function(e){$.C(e);G.i=i;aF(G)});});if(G.l){$.K(G.l,'mousedown',function(){G.i--;aF(G)});$.K(G.r,'mousedown',function(){G.i++;aF(G)});}});if($.aj){$.resize(function(){setTimeout(function(){$.w=window.innerWidth;$.O(list,function(k){var page=$.V('.pages',this);$.j(this,-$.w*(this.i+1));$.M(this,{w:$.w*(page.length+2)});$.O(page,function(i){$.M(this,{w:$.w});})})},300)});}})();})(window);