var define,require;(function(b,d){if(b.mfeng==d){b.mfeng={}}var a={};function c(f){var e=f.factory;f.exports={};delete f.factory;e(require,f.exports,f);return f.exports}define=function(f,e){if(a[f]){throw new Error("module "+f+" already defined!")}a[f]={id:f,factory:e}};require=function(f){var e=a[f];if(!e){throw new Error("module "+f+" not found!")}return e.factory?c(e):e.exports}})(window);define("util",function(c,b,d){var a={toString:function(e){return Object.prototype.toString.call(e)},isFunction:function(e){return e&&a.toString(e)==="[object Function]"},isPlainObject:function(e){return e&&a.toString(e)==="[object Object]"},isArray:function(e){return a.isFunction(Array.isArray)?Array.isArray(e):(e&&a.toString(e)==="[object Array]")},mix:function(f,g,e){e=e===false?false:true;var i,h,j,k;for(i in g){j=g[i];h=f[i];if(e&&(a.isArray(j)||a.isPlainObject(j))){k=f[i]=(h&&(a.isArray(h)||a.isPlainObject(h)))?h:a.isArray(h)?[]:{};a.mix(k,j,e)}else{f[i]=j}}return f},clone:function(e){return a.mix({},e)},apply:function(e,f,g){if(g){a.apply(e,g)}return a.mix(e,f)},bind:function(){var g=arguments[0],h=arguments[1],e=Array.prototype.splice.call(arguments,2),f=function(){return h.apply(g,e.concat(Array.prototype.slice.call(arguments)))};return f},addClass:function(f,e){var g=f.className.split(" ");if(g.indexOf(e)>-1){return false}g.push(e);f.className=g.join(" ")},removeClass:function(f,e){var g=f.className.split(" "),h=g.indexOf(e);if(h<=-1){return false}g.splice(h,1);f.className=g.join(" ")},observe:function(e){e.__listeners={};e.on=function(f,g,h){if(this.__listeners[f]==undefined){this.__listeners[f]=[]}this.__listeners[f].push({eventName:f,handler:g,host:h||this})};e.fire=function(h){if(this.__listeners[h]==undefined){return false}var g=this.__listeners[h],l,k=0,f=this.__listeners[h].length,j=(Array.prototype.slice.call(arguments,1));j.unshift(h);for(;k<f;k++){l=g[k];l.handler.apply(l.host,j)}}}};a.mix(b,a)});define("widget",function(h,t,c){var a=h("util"),g,b,m,j,r,e,o,i,s,d=document.body.style,p=(d.webkitTransition!==undefined&&"webkit")||(d.MozTransition!==undefined&&"moz")||(d.OTransition!==undefined&&"opera")||(d.transition!==undefined&&"orign")||(d.msTransform!==undefined&&"ms"),n="ontouchstart" in window,l=navigator.userAgent.indexOf("iPod")>-1,q=l?400:0;switch(p){case"orign":g=b="transition";m=j="transform";r="transitionDuration";e="transitionEnd";break;case"webkit":default:g="webkitTransition";b="-webkit-transition";m="webkitTransform";j="-webkit-transform";r="webkitTransitionDuration";e="webkitTransitionEnd";o="webkitPerspective";i="webkitTransformStyle";s="webkitBackfaceVisibility";break;case"moz":g="MozTransition";b="-moz-transition";m="MozTransform";j="-moz-transform";r="MozTransitionDuration";e="transitionend";o="MozPerspective";i="MozTransformStyle";s="MozBackfaceVisibility";break;case"opera":g="OTransition";b="-o-transition";m="OTransform";j="-o-transform";r="OTransitionDuration";e="oTransitionEnd";break;case"ms":g="MSTransition";b="-ms-transition";m="msTransform";j="-ms-transform";r="MSTransitionDuration";e="msTransitionEnd";break}function f(){this.init.apply(this,arguments)}f.DEFAULT_CONFIG={isAutoPlay:false,speed:350,interval:4000};f.MIN_MOVEMENT=30;f.status={TOUCH:"__touch__",TOUCH_END:"__touchend__",SLIDING:"__sliding__"};f.prototype={init:function(x){if(!(x&&x.id)){throw new Error("id is required!")}a.apply(this,x||{},f.DEFAULT_CONFIG);this._el=document.getElementById(this.id);this._content=this._el.innerHTML;this._currentPage=0;this._pages=Array.prototype.slice.call(this._el.children).length;this._initDom();this._pageItems=Array.prototype.slice.call(this._wrapper.children);this._applyStyle();this._bindEvent();if(this.indicator){a.apply(this.indicator,{size:this._pages});var u=k.create(this.indicator),v=this,w=function(z,y){if(v.isAutoPlay){v.replay()}v.pageTo(y)};if(this.indicator.controllable==true){u.on("change",w)}this.setIndicator(u)}this._initStatus();if(this.isAutoPlay){this.play()}},_initDom:function(){this._wrapper=document.createElement("div");this._wrapper.innerHTML=this._content;this._el.innerHTML="";this._el.appendChild(this._wrapper)},_applyStyle:function(){var u=this.pageWidth*this._pages;this._el.style.overflow="hidden";this._wrapper.style.width=u+q+"px";for(var v=0;v<this._pages;v++){this._pageItems[v].style.width=this.pageWidth+"px"}this._wrapper.style[g]=j+" "+this.speed+"ms";if(p=="webkit"||p=="moz"){this._wrapper.style[s]="hidden";this._wrapper.style[o]="1000px";this._wrapper.style[i]="preserve-3d"}},_initStatus:function(){this.pageTo(0);var u=document.createEvent("Event");u.initEvent(e,false,true);this._wrapper.dispatchEvent(u)},isFirstPage:function(){return this._currentPage==0},isLastPage:function(){return this._currentPage>=this._pages-1},next:function(){var u=this._currentPage;if(!this.isLastPage()){this.pageTo(++u)}},prev:function(){var u=this._currentPage;if(!this.isFirstPage()){this.pageTo(--u)}},play:function(){if(this._intervalId){return false}this._intervalId=setInterval(a.bind(this,this.next),this.interval)},stop:function(){if(!this._intervalId){return false}clearInterval(this._intervalId);delete this._intervalId},replay:function(){this.stop();this.play()},refresh:function(v){var u=this;a.apply(this,v);this._applyStyle();this._wrapper.style[r]=0+"ms";this.pageTo(this._currentPage);setTimeout(function(){u._wrapper.style[r]=u.speed+"ms"},10)},pageTo:function(u){if(this._currentPage!==u){this._isLock=true}this._currentPage=u;this._move(-(this._currentPage*this.pageWidth))},setIndicator:function(u){this._indicator=u},_move:function(u){if(p=="opera"){this._wrapper.style[m]="translate("+u+"px, 0)"}else{this._wrapper.style[m]="translate3d("+u+"px, 0, 0)"}},_bindEvent:function(){var w="ontouchstart" in window?"touchstart":"mousedown",v="ontouchmove" in window?"touchmove":"mousemove",u="ontouchend" in window?"touchend":"mouseup";this._el.addEventListener(w,a.bind(this,this._touchstartHandler),false);this._el.addEventListener(v,a.bind(this,this._touchmoveHandler),false);this._el.addEventListener(u,a.bind(this,this._touchendHandler),false);this._wrapper.addEventListener(e,a.bind(this,this._transitionEndHandler),false)},_touchstartHandler:function(u){if(this._isLock==true){return false}this._status=f.status.TOUCH;if(this.isAutoPlay){this.stop()}this._startX=this._endX=u.touches?u.touches[0].clientX:u.clientX;this._startY=this._endY=u.touches?u.touches[0].clientY:u.clientY},_touchmoveHandler:function(v){if(this._status!=f.status.TOUCH){return false}var u=v.touches?v.touches[0].clientX:v.clientX,w=u-this._startX;this._endX=u;this._endY=v.touches?v.touches[0].clientY:v.clientY;if(Math.abs(this._endY-this._startY)>Math.abs(this._endX-this._startX)){this._endX=this._startX;return false}if((this.isFirstPage()&&w>0)||(this.isLastPage()&&w<0)){return false}this._wrapper.style[g]=null;this._move(w*1.2-(this._currentPage*this.pageWidth));v.preventDefault()},_touchendHandler:function(u){if(this._status!=f.status.TOUCH){return false}this._status=f.status.TOUCH_END;if(this.isAutoPlay){this.play()}this._wrapper.style[g]=j+" "+this.speed+"ms";var v=this._endX-this._startX;if(Math.abs(v)>f.MIN_MOVEMENT){v>0?this.prev():this.next()}else{this.pageTo(this._currentPage)}},_transitionEndHandler:function(u){if(this.isAutoPlay==true){if(this.isFirstPage()){this.play()}else{if(this.isLastPage()){this.stop()}}}this._isLock=false;this._indicator&&this._indicator.active(this._currentPage)}};function k(x,v,u,w){a.observe(this);this._el=document.getElementById(x);this._size=v;this._activeClassName=u;this._items=Array.prototype.slice.call(this._el.children);if(w==true){this._el.addEventListener("click",a.bind(this,this.clickHandler),false)}}k.create=function(u){return new k(u.id,u.size,u.activeClassName||"active",u.controllable)};k.prototype={active:function(u){this._activeItem&&a.removeClass(this._activeItem,this._activeClassName);this._activeItem=this._items[u];a.addClass(this._activeItem,this._activeClassName)},clickHandler:function(v){var u=this._items.indexOf(v.target);if(u>-1){this.fire("change",u)}}};t.IFengSlide=f});